function cov_1kuagx3p5o() {
  var path = "/home/shubham/Desktop/juice-shop/build/routes/authenticatedUsers.ts";
  var hash = "3000d6d2e13d9ec24d6bc66a370b8f84f7982944";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/shubham/Desktop/juice-shop/build/routes/authenticatedUsers.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 13
        },
        end: {
          line: 2,
          column: 76
        }
      },
      "1": {
        start: {
          line: 3,
          column: 13
        },
        end: {
          line: 3,
          column: 55
        }
      },
      "2": {
        start: {
          line: 4,
          column: 15
        },
        end: {
          line: 4,
          column: 44
        }
      },
      "3": {
        start: {
          line: 5,
          column: 12
        },
        end: {
          line: 5,
          column: 26
        }
      },
      "4": {
        start: {
          line: 6,
          column: 21
        },
        end: {
          line: 369,
          column: 3
        }
      },
      "5": {
        start: {
          line: 370,
          column: 17
        },
        end: {
          line: 370,
          column: 50
        }
      },
      "6": {
        start: {
          line: 372,
          column: 2
        },
        end: {
          line: 374,
          column: 3
        }
      },
      "7": {
        start: {
          line: 373,
          column: 4
        },
        end: {
          line: 373,
          column: 34
        }
      },
      "8": {
        start: {
          line: 376,
          column: 23
        },
        end: {
          line: 376,
          column: 37
        }
      },
      "9": {
        start: {
          line: 379,
          column: 4
        },
        end: {
          line: 381,
          column: 6
        }
      },
      "10": {
        start: {
          line: 380,
          column: 6
        },
        end: {
          line: 380,
          column: 28
        }
      },
      "11": {
        start: {
          line: 383,
          column: 2
        },
        end: {
          line: 383,
          column: 24
        }
      },
      "12": {
        start: {
          line: 386,
          column: 0
        },
        end: {
          line: 386,
          column: 16
        }
      },
      "13": {
        start: {
          line: 394,
          column: 15
        },
        end: {
          line: 394,
          column: 62
        }
      },
      "14": {
        start: {
          line: 395,
          column: 18
        },
        end: {
          line: 395,
          column: 70
        }
      },
      "15": {
        start: {
          line: 396,
          column: 0
        },
        end: {
          line: 396,
          column: 23
        }
      },
      "16": {
        start: {
          line: 398,
          column: 0
        },
        end: {
          line: 444,
          column: 2
        }
      },
      "17": {
        start: {
          line: 399,
          column: 2
        },
        end: {
          line: 399,
          column: 25
        }
      },
      "18": {
        start: {
          line: 400,
          column: 2
        },
        end: {
          line: 400,
          column: 25
        }
      },
      "19": {
        start: {
          line: 401,
          column: 2
        },
        end: {
          line: 443,
          column: 4
        }
      },
      "20": {
        start: {
          line: 402,
          column: 4
        },
        end: {
          line: 402,
          column: 27
        }
      },
      "21": {
        start: {
          line: 403,
          column: 4
        },
        end: {
          line: 403,
          column: 27
        }
      },
      "22": {
        start: {
          line: 404,
          column: 4
        },
        end: {
          line: 442,
          column: 7
        }
      },
      "23": {
        start: {
          line: 405,
          column: 6
        },
        end: {
          line: 405,
          column: 29
        }
      },
      "24": {
        start: {
          line: 406,
          column: 36
        },
        end: {
          line: 406,
          column: 90
        }
      },
      "25": {
        start: {
          line: 407,
          column: 6
        },
        end: {
          line: 407,
          column: 29
        }
      },
      "26": {
        start: {
          line: 408,
          column: 6
        },
        end: {
          line: 435,
          column: 9
        }
      },
      "27": {
        start: {
          line: 413,
          column: 8
        },
        end: {
          line: 413,
          column: 31
        }
      },
      "28": {
        start: {
          line: 414,
          column: 8
        },
        end: {
          line: 414,
          column: 31
        }
      },
      "29": {
        start: {
          line: 415,
          column: 8
        },
        end: {
          line: 415,
          column: 63
        }
      },
      "30": {
        start: {
          line: 416,
          column: 8
        },
        end: {
          line: 416,
          column: 31
        }
      },
      "31": {
        start: {
          line: 418,
          column: 8
        },
        end: {
          line: 424,
          column: 9
        }
      },
      "32": {
        start: {
          line: 419,
          column: 10
        },
        end: {
          line: 419,
          column: 36
        }
      },
      "33": {
        start: {
          line: 420,
          column: 10
        },
        end: {
          line: 420,
          column: 33
        }
      },
      "34": {
        start: {
          line: 421,
          column: 10
        },
        end: {
          line: 421,
          column: 59
        }
      },
      "35": {
        start: {
          line: 423,
          column: 10
        },
        end: {
          line: 423,
          column: 36
        }
      },
      "36": {
        start: {
          line: 426,
          column: 8
        },
        end: {
          line: 426,
          column: 32
        }
      },
      "37": {
        start: {
          line: 428,
          column: 8
        },
        end: {
          line: 434,
          column: 9
        }
      },
      "38": {
        start: {
          line: 429,
          column: 10
        },
        end: {
          line: 429,
          column: 36
        }
      },
      "39": {
        start: {
          line: 430,
          column: 10
        },
        end: {
          line: 430,
          column: 34
        }
      },
      "40": {
        start: {
          line: 431,
          column: 10
        },
        end: {
          line: 431,
          column: 63
        }
      },
      "41": {
        start: {
          line: 433,
          column: 10
        },
        end: {
          line: 433,
          column: 36
        }
      },
      "42": {
        start: {
          line: 436,
          column: 6
        },
        end: {
          line: 436,
          column: 30
        }
      },
      "43": {
        start: {
          line: 437,
          column: 6
        },
        end: {
          line: 437,
          column: 37
        }
      },
      "44": {
        start: {
          line: 439,
          column: 6
        },
        end: {
          line: 439,
          column: 29
        }
      },
      "45": {
        start: {
          line: 440,
          column: 6
        },
        end: {
          line: 440,
          column: 30
        }
      },
      "46": {
        start: {
          line: 441,
          column: 6
        },
        end: {
          line: 441,
          column: 18
        }
      }
    },
    fnMap: {
      "0": {
        name: "cov_8dmev6qem",
        decl: {
          start: {
            line: 1,
            column: 9
          },
          end: {
            line: 1,
            column: 22
          }
        },
        loc: {
          start: {
            line: 1,
            column: 25
          },
          end: {
            line: 384,
            column: 1
          }
        },
        line: 1
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 379,
            column: 20
          },
          end: {
            line: 379,
            column: 21
          }
        },
        loc: {
          start: {
            line: 379,
            column: 32
          },
          end: {
            line: 381,
            column: 5
          }
        },
        line: 379
      },
      "2": {
        name: "retrieveUserList",
        decl: {
          start: {
            line: 398,
            column: 26
          },
          end: {
            line: 398,
            column: 42
          }
        },
        loc: {
          start: {
            line: 398,
            column: 45
          },
          end: {
            line: 444,
            column: 1
          }
        },
        line: 398
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 401,
            column: 9
          },
          end: {
            line: 401,
            column: 10
          }
        },
        loc: {
          start: {
            line: 401,
            column: 63
          },
          end: {
            line: 443,
            column: 3
          }
        },
        line: 401
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 404,
            column: 29
          },
          end: {
            line: 404,
            column: 30
          }
        },
        loc: {
          start: {
            line: 404,
            column: 53
          },
          end: {
            line: 438,
            column: 5
          }
        },
        line: 404
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 408,
            column: 40
          },
          end: {
            line: 408,
            column: 41
          }
        },
        loc: {
          start: {
            line: 412,
            column: 12
          },
          end: {
            line: 435,
            column: 7
          }
        },
        line: 412
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 438,
            column: 13
          },
          end: {
            line: 438,
            column: 14
          }
        },
        loc: {
          start: {
            line: 438,
            column: 31
          },
          end: {
            line: 442,
            column: 5
          }
        },
        line: 438
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 370,
            column: 17
          },
          end: {
            line: 370,
            column: 50
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 370,
            column: 17
          },
          end: {
            line: 370,
            column: 28
          }
        }, {
          start: {
            line: 370,
            column: 33
          },
          end: {
            line: 370,
            column: 49
          }
        }],
        line: 370
      },
      "1": {
        loc: {
          start: {
            line: 372,
            column: 2
          },
          end: {
            line: 374,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 372,
            column: 2
          },
          end: {
            line: 374,
            column: 3
          }
        }, {
          start: {
            line: 372,
            column: 2
          },
          end: {
            line: 374,
            column: 3
          }
        }],
        line: 372
      },
      "2": {
        loc: {
          start: {
            line: 372,
            column: 6
          },
          end: {
            line: 372,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 372,
            column: 6
          },
          end: {
            line: 372,
            column: 21
          }
        }, {
          start: {
            line: 372,
            column: 25
          },
          end: {
            line: 372,
            column: 53
          }
        }],
        line: 372
      },
      "3": {
        loc: {
          start: {
            line: 418,
            column: 8
          },
          end: {
            line: 424,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 418,
            column: 8
          },
          end: {
            line: 424,
            column: 9
          }
        }, {
          start: {
            line: 418,
            column: 8
          },
          end: {
            line: 424,
            column: 9
          }
        }],
        line: 418
      },
      "4": {
        loc: {
          start: {
            line: 428,
            column: 8
          },
          end: {
            line: 434,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 428,
            column: 8
          },
          end: {
            line: 434,
            column: 9
          }
        }, {
          start: {
            line: 428,
            column: 8
          },
          end: {
            line: 434,
            column: 9
          }
        }],
        line: 428
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      names: ["Request", "Response", "NextFunction", "UserModel", "utils", "require", "security", "module", "exports", "retrieveUserList", "_req", "res", "next", "findAll", "then", "users", "usersWithLoginStatus", "queryResultToJson", "data", "forEach", "user", "token", "password", "totpSecret", "authenticatedUsers", "tokenOf", "replace", "json", "catch", "error", "Error"],
      sources: ["authenticatedUsers.ts"],
      sourcesContent: ["/*\n * Copyright (c) 2014-2022 Bjoern Kimminich & the OWASP Juice Shop contributors.\n * SPDX-License-Identifier: MIT\n */\nimport { Request, Response, NextFunction } from 'express'\nimport { UserModel } from '../models/user'\n\nconst utils = require('../lib/utils')\nconst security = require('../lib/insecurity')\n\nmodule.exports = function retrieveUserList () {\n  return (_req: Request, res: Response, next: NextFunction) => {\n    UserModel.findAll().then((users: UserModel[]) => {\n      const usersWithLoginStatus = utils.queryResultToJson(users)\n      usersWithLoginStatus.data.forEach((user: { token: string, password: string, totpSecret: string }) => {\n        user.token = security.authenticatedUsers.tokenOf(user)\n        if (user.password) {\n          user.password = user.password.replace(/./g, '*')\n        }\n        if (user.totpSecret) {\n          user.totpSecret = user.totpSecret.replace(/./g, '*')\n        }\n      })\n      res.json(usersWithLoginStatus)\n    }).catch((error: Error) => {\n      next(error)\n    })\n  }\n}\n"],
      mappings: ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;;;;;;;;;;AAfZ;AACA;AACA;AACA;AACA,SAASA,OAAT,EAAkBC,QAAlB,EAA4BC,YAA5B,QAAgD,SAAhD;AACA,SAASC,SAAT,QAA0B,gBAA1B;AAEA,MAAMC,KAAK,4BAAGC,OAAO,CAAC,cAAD,CAAV,CAAX;AACA,MAAMC,QAAQ,4BAAGD,OAAO,CAAC,mBAAD,CAAV,CAAd;;;AAEAE,MAAM,CAACC,OAAP,GAAiB,SAASC,gBAAT,GAA6B;EAAA;EAAA;EAC5C,OAAO,CAACC,IAAI,EAAEV,OAAP,EAAgBW,GAAG,EAAEV,QAArB,EAA+BW,IAAI,EAAEV,YAArC,KAAsD;IAAA;IAAA;IAC3DC,SAAS,CAACU,OAAV,GAAoBC,IAApB,CAAyB,CAACC,KAAK,EAAEZ,SAAS,EAAjB,KAAwB;MAAA;MAC/C,MAAMa,oBAAoB,4BAAGZ,KAAK,CAACa,iBAAN,CAAwBF,KAAxB,CAAH,CAA1B;MAD+C;MAE/CC,oBAAoB,CAACE,IAArB,CAA0BC,OAA1B,CAAkC,CAACC,IAAI,EAAE;QAAEC,KAAK,EAAE,MAAF;QAAUC,QAAQ,EAAE,MAAF;QAAUC,UAAU,EAAE,MAAF;MAA7C,CAAP,KAAmE;QAAA;QAAA;QACnGH,IAAI,CAACC,KAAL,GAAaf,QAAQ,CAACkB,kBAAT,CAA4BC,OAA5B,CAAoCL,IAApC,CAAb;QADmG;;QAEnG,IAAIA,IAAI,CAACE,QAAT,EAAmB;UAAA;UAAA;UACjBF,IAAI,CAACE,QAAL,GAAgBF,IAAI,CAACE,QAAL,CAAcI,OAAd,CAAsB,IAAtB,EAA4B,GAA5B,CAAhB;QACD,CAFD;UAAA;QAAA;;QAFmG;;QAKnG,IAAIN,IAAI,CAACG,UAAT,EAAqB;UAAA;UAAA;UACnBH,IAAI,CAACG,UAAL,GAAkBH,IAAI,CAACG,UAAL,CAAgBG,OAAhB,CAAwB,IAAxB,EAA8B,GAA9B,CAAlB;QACD,CAFD;UAAA;QAAA;MAGD,CARD;MAF+C;MAW/Cf,GAAG,CAACgB,IAAJ,CAASX,oBAAT;IACD,CAZD,EAYGY,KAZH,CAYS,CAACC,KAAK,EAAEC,KAAR,KAAkB;MAAA;MAAA;MACzBlB,IAAI,CAACiB,KAAD,CAAJ;IACD,CAdD;EAeD,CAhBD;AAiBD,CAlBD"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "3000d6d2e13d9ec24d6bc66a370b8f84f7982944"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1kuagx3p5o = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_1kuagx3p5o();

function cov_8dmev6qem() {
  cov_1kuagx3p5o().f[0]++;
  var path = (cov_1kuagx3p5o().s[0]++, "/home/shubham/Desktop/juice-shop/routes/authenticatedUsers.ts");
  var hash = (cov_1kuagx3p5o().s[1]++, "ea5bdd3973e6164a40e8f1203121f51a87fc69f8");
  var global = (cov_1kuagx3p5o().s[2]++, new Function("return this")());
  var gcv = (cov_1kuagx3p5o().s[3]++, "__coverage__");
  var coverageData = (cov_1kuagx3p5o().s[4]++, {
    path: "/home/shubham/Desktop/juice-shop/routes/authenticatedUsers.ts",
    statementMap: {
      "0": {
        start: {
          line: 8,
          column: 14
        },
        end: {
          line: 8,
          column: 37
        }
      },
      "1": {
        start: {
          line: 9,
          column: 17
        },
        end: {
          line: 9,
          column: 45
        }
      },
      "2": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 29,
          column: 1
        }
      },
      "3": {
        start: {
          line: 12,
          column: 2
        },
        end: {
          line: 28,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 4
        },
        end: {
          line: 27,
          column: 6
        }
      },
      "5": {
        start: {
          line: 14,
          column: 35
        },
        end: {
          line: 14,
          column: 65
        }
      },
      "6": {
        start: {
          line: 15,
          column: 6
        },
        end: {
          line: 23,
          column: 8
        }
      },
      "7": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 62
        }
      },
      "8": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 19,
          column: 9
        }
      },
      "9": {
        start: {
          line: 18,
          column: 10
        },
        end: {
          line: 18,
          column: 58
        }
      },
      "10": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 22,
          column: 9
        }
      },
      "11": {
        start: {
          line: 21,
          column: 10
        },
        end: {
          line: 21,
          column: 62
        }
      },
      "12": {
        start: {
          line: 24,
          column: 6
        },
        end: {
          line: 24,
          column: 36
        }
      },
      "13": {
        start: {
          line: 26,
          column: 6
        },
        end: {
          line: 26,
          column: 17
        }
      }
    },
    fnMap: {
      "0": {
        name: "retrieveUserList",
        decl: {
          start: {
            line: 11,
            column: 26
          },
          end: {
            line: 11,
            column: 42
          }
        },
        loc: {
          start: {
            line: 11,
            column: 46
          },
          end: {
            line: 29,
            column: 1
          }
        },
        line: 11
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 9
          },
          end: {
            line: 12,
            column: 10
          }
        },
        loc: {
          start: {
            line: 12,
            column: 63
          },
          end: {
            line: 28,
            column: 3
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 13,
            column: 29
          },
          end: {
            line: 13,
            column: 30
          }
        },
        loc: {
          start: {
            line: 13,
            column: 53
          },
          end: {
            line: 25,
            column: 5
          }
        },
        line: 13
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 15,
            column: 40
          },
          end: {
            line: 15,
            column: 41
          }
        },
        loc: {
          start: {
            line: 15,
            column: 107
          },
          end: {
            line: 23,
            column: 7
          }
        },
        line: 15
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 25,
            column: 13
          },
          end: {
            line: 25,
            column: 14
          }
        },
        loc: {
          start: {
            line: 25,
            column: 31
          },
          end: {
            line: 27,
            column: 5
          }
        },
        line: 25
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 17,
            column: 8
          },
          end: {
            line: 19,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 17,
            column: 8
          },
          end: {
            line: 19,
            column: 9
          }
        }, {
          start: {
            line: 17,
            column: 8
          },
          end: {
            line: 19,
            column: 9
          }
        }],
        line: 17
      },
      "1": {
        loc: {
          start: {
            line: 20,
            column: 8
          },
          end: {
            line: 22,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 20,
            column: 8
          },
          end: {
            line: 22,
            column: 9
          }
        }, {
          start: {
            line: 20,
            column: 8
          },
          end: {
            line: 22,
            column: 9
          }
        }],
        line: 20
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "ea5bdd3973e6164a40e8f1203121f51a87fc69f8"
  });
  var coverage = (cov_1kuagx3p5o().s[5]++, (cov_1kuagx3p5o().b[0][0]++, global[gcv]) || (cov_1kuagx3p5o().b[0][1]++, global[gcv] = {}));
  cov_1kuagx3p5o().s[6]++;

  if ((cov_1kuagx3p5o().b[2][0]++, !coverage[path]) || (cov_1kuagx3p5o().b[2][1]++, coverage[path].hash !== hash)) {
    cov_1kuagx3p5o().b[1][0]++;
    cov_1kuagx3p5o().s[7]++;
    coverage[path] = coverageData;
  } else {
    cov_1kuagx3p5o().b[1][1]++;
  }

  var actualCoverage = (cov_1kuagx3p5o().s[8]++, coverage[path]);
  {
    cov_1kuagx3p5o().s[9]++;

    // @ts-ignore
    cov_8dmev6qem = function () {
      cov_1kuagx3p5o().f[1]++;
      cov_1kuagx3p5o().s[10]++;
      return actualCoverage;
    };
  }
  cov_1kuagx3p5o().s[11]++;
  return actualCoverage;
}

cov_1kuagx3p5o().s[12]++;
cov_8dmev6qem();
/*
 * Copyright (c) 2014-2022 Bjoern Kimminich & the OWASP Juice Shop contributors.
 * SPDX-License-Identifier: MIT
 */

import { Request, Response, NextFunction } from 'express';
import { UserModel } from '../models/user';
const utils = (cov_1kuagx3p5o().s[13]++, (cov_8dmev6qem().s[0]++, require('../lib/utils')));
const security = (cov_1kuagx3p5o().s[14]++, (cov_8dmev6qem().s[1]++, require('../lib/insecurity')));
cov_1kuagx3p5o().s[15]++;
cov_8dmev6qem().s[2]++;
cov_1kuagx3p5o().s[16]++;

module.exports = function retrieveUserList() {
  cov_1kuagx3p5o().f[2]++;
  cov_1kuagx3p5o().s[17]++;
  cov_8dmev6qem().f[0]++;
  cov_1kuagx3p5o().s[18]++;
  cov_8dmev6qem().s[3]++;
  cov_1kuagx3p5o().s[19]++;
  return (_req: Request, res: Response, next: NextFunction) => {
    cov_1kuagx3p5o().f[3]++;
    cov_1kuagx3p5o().s[20]++;
    cov_8dmev6qem().f[1]++;
    cov_1kuagx3p5o().s[21]++;
    cov_8dmev6qem().s[4]++;
    cov_1kuagx3p5o().s[22]++;
    UserModel.findAll().then((users: UserModel[]) => {
      cov_1kuagx3p5o().f[4]++;
      cov_1kuagx3p5o().s[23]++;
      cov_8dmev6qem().f[2]++;
      const usersWithLoginStatus = (cov_1kuagx3p5o().s[24]++, (cov_8dmev6qem().s[5]++, utils.queryResultToJson(users)));
      cov_1kuagx3p5o().s[25]++;
      cov_8dmev6qem().s[6]++;
      cov_1kuagx3p5o().s[26]++;
      usersWithLoginStatus.data.forEach((user: {
        token: string;
        password: string;
        totpSecret: string;
      }) => {
        cov_1kuagx3p5o().f[5]++;
        cov_1kuagx3p5o().s[27]++;
        cov_8dmev6qem().f[3]++;
        cov_1kuagx3p5o().s[28]++;
        cov_8dmev6qem().s[7]++;
        cov_1kuagx3p5o().s[29]++;
        user.token = security.authenticatedUsers.tokenOf(user);
        cov_1kuagx3p5o().s[30]++;
        cov_8dmev6qem().s[8]++;
        cov_1kuagx3p5o().s[31]++;

        if (user.password) {
          cov_1kuagx3p5o().b[3][0]++;
          cov_1kuagx3p5o().s[32]++;
          cov_8dmev6qem().b[0][0]++;
          cov_1kuagx3p5o().s[33]++;
          cov_8dmev6qem().s[9]++;
          cov_1kuagx3p5o().s[34]++;
          user.password = user.password.replace(/./g, '*');
        } else {
          cov_1kuagx3p5o().b[3][1]++;
          cov_1kuagx3p5o().s[35]++;
          cov_8dmev6qem().b[0][1]++;
        }

        cov_1kuagx3p5o().s[36]++;
        cov_8dmev6qem().s[10]++;
        cov_1kuagx3p5o().s[37]++;

        if (user.totpSecret) {
          cov_1kuagx3p5o().b[4][0]++;
          cov_1kuagx3p5o().s[38]++;
          cov_8dmev6qem().b[1][0]++;
          cov_1kuagx3p5o().s[39]++;
          cov_8dmev6qem().s[11]++;
          cov_1kuagx3p5o().s[40]++;
          user.totpSecret = user.totpSecret.replace(/./g, '*');
        } else {
          cov_1kuagx3p5o().b[4][1]++;
          cov_1kuagx3p5o().s[41]++;
          cov_8dmev6qem().b[1][1]++;
        }
      });
      cov_1kuagx3p5o().s[42]++;
      cov_8dmev6qem().s[12]++;
      cov_1kuagx3p5o().s[43]++;
      res.json(usersWithLoginStatus);
    }).catch((error: Error) => {
      cov_1kuagx3p5o().f[6]++;
      cov_1kuagx3p5o().s[44]++;
      cov_8dmev6qem().f[4]++;
      cov_1kuagx3p5o().s[45]++;
      cov_8dmev6qem().s[13]++;
      cov_1kuagx3p5o().s[46]++;
      next(error);
    });
  };
}; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZXF1ZXN0IiwiUmVzcG9uc2UiLCJOZXh0RnVuY3Rpb24iLCJVc2VyTW9kZWwiLCJ1dGlscyIsInJlcXVpcmUiLCJzZWN1cml0eSIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXRyaWV2ZVVzZXJMaXN0IiwiX3JlcSIsInJlcyIsIm5leHQiLCJmaW5kQWxsIiwidGhlbiIsInVzZXJzIiwidXNlcnNXaXRoTG9naW5TdGF0dXMiLCJxdWVyeVJlc3VsdFRvSnNvbiIsImRhdGEiLCJmb3JFYWNoIiwidXNlciIsInRva2VuIiwicGFzc3dvcmQiLCJ0b3RwU2VjcmV0IiwiYXV0aGVudGljYXRlZFVzZXJzIiwidG9rZW5PZiIsInJlcGxhY2UiLCJqc29uIiwiY2F0Y2giLCJlcnJvciIsIkVycm9yIl0sInNvdXJjZXMiOlsiYXV0aGVudGljYXRlZFVzZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAyMiBCam9lcm4gS2ltbWluaWNoICYgdGhlIE9XQVNQIEp1aWNlIFNob3AgY29udHJpYnV0b3JzLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuICovXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSAnZXhwcmVzcydcbmltcG9ydCB7IFVzZXJNb2RlbCB9IGZyb20gJy4uL21vZGVscy91c2VyJ1xuXG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4uL2xpYi91dGlscycpXG5jb25zdCBzZWN1cml0eSA9IHJlcXVpcmUoJy4uL2xpYi9pbnNlY3VyaXR5JylcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXRyaWV2ZVVzZXJMaXN0ICgpIHtcbiAgcmV0dXJuIChfcmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICBVc2VyTW9kZWwuZmluZEFsbCgpLnRoZW4oKHVzZXJzOiBVc2VyTW9kZWxbXSkgPT4ge1xuICAgICAgY29uc3QgdXNlcnNXaXRoTG9naW5TdGF0dXMgPSB1dGlscy5xdWVyeVJlc3VsdFRvSnNvbih1c2VycylcbiAgICAgIHVzZXJzV2l0aExvZ2luU3RhdHVzLmRhdGEuZm9yRWFjaCgodXNlcjogeyB0b2tlbjogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCB0b3RwU2VjcmV0OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICB1c2VyLnRva2VuID0gc2VjdXJpdHkuYXV0aGVudGljYXRlZFVzZXJzLnRva2VuT2YodXNlcilcbiAgICAgICAgaWYgKHVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICB1c2VyLnBhc3N3b3JkID0gdXNlci5wYXNzd29yZC5yZXBsYWNlKC8uL2csICcqJylcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlci50b3RwU2VjcmV0KSB7XG4gICAgICAgICAgdXNlci50b3RwU2VjcmV0ID0gdXNlci50b3RwU2VjcmV0LnJlcGxhY2UoLy4vZywgJyonKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmVzLmpzb24odXNlcnNXaXRoTG9naW5TdGF0dXMpXG4gICAgfSkuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgbmV4dChlcnJvcilcbiAgICB9KVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7Ozs7Ozs7Ozs7QUFmWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNBLE9BQVQsRUFBa0JDLFFBQWxCLEVBQTRCQyxZQUE1QixRQUFnRCxTQUFoRDtBQUNBLFNBQVNDLFNBQVQsUUFBMEIsZ0JBQTFCO0FBRUEsTUFBTUMsS0FBSyw0QkFBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFYO0FBQ0EsTUFBTUMsUUFBUSw0QkFBR0QsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBZDs7O0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixTQUFTQyxnQkFBVCxHQUE2QjtFQUFBO0VBQUE7RUFDNUMsT0FBTyxDQUFDQyxJQUFJLEVBQUVWLE9BQVAsRUFBZ0JXLEdBQUcsRUFBRVYsUUFBckIsRUFBK0JXLElBQUksRUFBRVYsWUFBckMsS0FBc0Q7SUFBQTtJQUFBO0lBQzNEQyxTQUFTLENBQUNVLE9BQVYsR0FBb0JDLElBQXBCLENBQXlCLENBQUNDLEtBQUssRUFBRVosU0FBUyxFQUFqQixLQUF3QjtNQUFBO01BQy9DLE1BQU1hLG9CQUFvQiw0QkFBR1osS0FBSyxDQUFDYSxpQkFBTixDQUF3QkYsS0FBeEIsQ0FBSCxDQUExQjtNQUQrQztNQUUvQ0Msb0JBQW9CLENBQUNFLElBQXJCLENBQTBCQyxPQUExQixDQUFrQyxDQUFDQyxJQUFJLEVBQUU7UUFBRUMsS0FBSyxFQUFFLE1BQUY7UUFBVUMsUUFBUSxFQUFFLE1BQUY7UUFBVUMsVUFBVSxFQUFFLE1BQUY7TUFBN0MsQ0FBUCxLQUFtRTtRQUFBO1FBQUE7UUFDbkdILElBQUksQ0FBQ0MsS0FBTCxHQUFhZixRQUFRLENBQUNrQixrQkFBVCxDQUE0QkMsT0FBNUIsQ0FBb0NMLElBQXBDLENBQWI7UUFEbUc7O1FBRW5HLElBQUlBLElBQUksQ0FBQ0UsUUFBVCxFQUFtQjtVQUFBO1VBQUE7VUFDakJGLElBQUksQ0FBQ0UsUUFBTCxHQUFnQkYsSUFBSSxDQUFDRSxRQUFMLENBQWNJLE9BQWQsQ0FBc0IsSUFBdEIsRUFBNEIsR0FBNUIsQ0FBaEI7UUFDRCxDQUZEO1VBQUE7UUFBQTs7UUFGbUc7O1FBS25HLElBQUlOLElBQUksQ0FBQ0csVUFBVCxFQUFxQjtVQUFBO1VBQUE7VUFDbkJILElBQUksQ0FBQ0csVUFBTCxHQUFrQkgsSUFBSSxDQUFDRyxVQUFMLENBQWdCRyxPQUFoQixDQUF3QixJQUF4QixFQUE4QixHQUE5QixDQUFsQjtRQUNELENBRkQ7VUFBQTtRQUFBO01BR0QsQ0FSRDtNQUYrQztNQVcvQ2YsR0FBRyxDQUFDZ0IsSUFBSixDQUFTWCxvQkFBVDtJQUNELENBWkQsRUFZR1ksS0FaSCxDQVlTLENBQUNDLEtBQUssRUFBRUMsS0FBUixLQUFrQjtNQUFBO01BQUE7TUFDekJsQixJQUFJLENBQUNpQixLQUFELENBQUo7SUFDRCxDQWREO0VBZUQsQ0FoQkQ7QUFpQkQsQ0FsQkQifQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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a0I7TUFBQTtNQUFBO01BQUFyQjtNQUFBO01BQUFBO01BQUE7TUFDekJHLElBQUksQ0FBQ2lCLEtBQUQsQ0FBSmpCO0lBYkY7RUFERjtBQURGLEUiLCJuYW1lcyI6WyJSZXF1ZXN0IiwiUmVzcG9uc2UiLCJOZXh0RnVuY3Rpb24iLCJVc2VyTW9kZWwiLCJ1dGlscyIsInJlcXVpcmUiLCJzZWN1cml0eSIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXRyaWV2ZVVzZXJMaXN0IiwiY292XzhkbWV2NnFlbSIsIl9yZXEiLCJyZXMiLCJuZXh0IiwiZmluZEFsbCIsInRoZW4iLCJ1c2VycyIsInVzZXJzV2l0aExvZ2luU3RhdHVzIiwicXVlcnlSZXN1bHRUb0pzb24iLCJkYXRhIiwiZm9yRWFjaCIsInVzZXIiLCJ0b2tlbiIsInBhc3N3b3JkIiwidG90cFNlY3JldCIsImF1dGhlbnRpY2F0ZWRVc2VycyIsInRva2VuT2YiLCJyZXBsYWNlIiwianNvbiIsImNhdGNoIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZWRVc2Vycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMjIgQmpvZXJuIEtpbW1pbmljaCAmIHRoZSBPV0FTUCBKdWljZSBTaG9wIGNvbnRyaWJ1dG9ycy5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbiAqL1xuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UsIE5leHRGdW5jdGlvbiB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgeyBVc2VyTW9kZWwgfSBmcm9tICcuLi9tb2RlbHMvdXNlcidcblxuY29uc3QgdXRpbHMgPSByZXF1aXJlKCcuLi9saWIvdXRpbHMnKVxuY29uc3Qgc2VjdXJpdHkgPSByZXF1aXJlKCcuLi9saWIvaW5zZWN1cml0eScpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmV0cmlldmVVc2VyTGlzdCAoKSB7XG4gIHJldHVybiAoX3JlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gICAgVXNlck1vZGVsLmZpbmRBbGwoKS50aGVuKCh1c2VyczogVXNlck1vZGVsW10pID0+IHtcbiAgICAgIGNvbnN0IHVzZXJzV2l0aExvZ2luU3RhdHVzID0gdXRpbHMucXVlcnlSZXN1bHRUb0pzb24odXNlcnMpXG4gICAgICB1c2Vyc1dpdGhMb2dpblN0YXR1cy5kYXRhLmZvckVhY2goKHVzZXI6IHsgdG9rZW46IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgdG90cFNlY3JldDogc3RyaW5nIH0pID0+IHtcbiAgICAgICAgdXNlci50b2tlbiA9IHNlY3VyaXR5LmF1dGhlbnRpY2F0ZWRVc2Vycy50b2tlbk9mKHVzZXIpXG4gICAgICAgIGlmICh1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgdXNlci5wYXNzd29yZCA9IHVzZXIucGFzc3dvcmQucmVwbGFjZSgvLi9nLCAnKicpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXIudG90cFNlY3JldCkge1xuICAgICAgICAgIHVzZXIudG90cFNlY3JldCA9IHVzZXIudG90cFNlY3JldC5yZXBsYWNlKC8uL2csICcqJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJlcy5qc29uKHVzZXJzV2l0aExvZ2luU3RhdHVzKVxuICAgIH0pLmNhdGNoKChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIG5leHQoZXJyb3IpXG4gICAgfSlcbiAgfVxufVxuIl19